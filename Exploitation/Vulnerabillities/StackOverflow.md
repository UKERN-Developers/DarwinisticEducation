# Stack Overflow
A Stack overflow is where a program allocates memory onto the stack without checking the size of the data, thus pushing the data beyond the end of the data space causing the data on the stack to write over the return address.

<img src="https://www.0x0ff.info/wp-content/uploads/2014/02/cheat-sheet.png" alt="memory segmentation cheat-sheet" width="550"/>

*source: https://www.reddit.com/r/hacking/comments/81d9ro/memory_segmentation_cheat_sheet_posted_by/*


A good way to show how a stack overflow works is via a vulnerable program :)

*stackoverflow.c:*
``` C
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void secret(){
  printf("good job, you cracked it");
}

int main(){
  char input[20];
  printf("input some stuff :\n");
  scanf("%s", input);
  return 0;
}
```

It's a simple program, it prints a line, asks for input, then exits. 

But it is vulnerable... do you see it?
If you don't, thats fine. This may be new to you.

See how our input variable has a size of 20? Well this means when the program runs, it creates a stack with a data size of 20. 
However scanf completely disregards buffer sizes and copies the data in anyway, thus overwriting important data. The goal of this is to manipulate the program flow to get to our secret function.

First, compile the binary.
Then, open up your favourite terminal, and run the binary.

Great! It works. Now how about you pipe some data into it:
`printf "AAAABBBBCCCCDDDDEEEEFFFF" | /path/to/binary`

As you should see, it crashes. Take a look at the crash log. THe crash log should show something along the lines of: 
`pc:0x46464646`

This `pc` thing is called the program counter register. The program counter register is the register that contains the hex address of the next asm instruction to go to. AKA, the return address :). At this point, we have full control over the program, and using ROP gadgets can point it to wherever we want. 




Should I talk about ROP Gadgets or leave that in a seperate ROP chapter?....
